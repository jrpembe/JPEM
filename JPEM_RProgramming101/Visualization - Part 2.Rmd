---
title: "Visualization"
author: "Jason Pemberton"
date: "2025-03-04"
output: html_document
editor_options: 
  markdown: 
    wrap: 72
---

```{r Load Libraries, include=FALSE}
library(tidyverse)
```

**GGPLOT Components**

-   **data** - Every ggplot visual starts with a dataset. This section
    can also contain many layers of data wrangling including select,
    filter, and mutate.

-   **mapping (aesthetics)** - This defines how variables in the dataset
    correspond to visual properties like:

    -   **Position (x and y)** → Placing data points on the plot.

    -   **Color** → Distinguishing groups via color encoding.

    -   **Size** → Changing point sizes to reflect a variable.

    -   **Shape** → Assigning different shapes to categorical variables

-   **geometric layers** - Geoms are the actual plot elements that
    represent the data. Common geoms include:

    -   `geom_point()` → Scatterplot.

    -   `geom_line()` → Line graph.

    -   `geom_bar()` → Bar chart.

    -   `geom_boxplot()` → Boxplot.

-   **statistics** - Statistics add computed elements to a plot:

    -   `stat_smooth()` → Adds regression lines or trend curves.

    -   `stat_summary()` → Displays summary statistics.

-   **facet** - Faceting splits a plot into multiple subplots based on a
    categorical variable:

    -   `facet_wrap(~var)` → Creates separate plots for each category.

    -   `facet_grid(rows ~ cols)` → Organizes subplots in a grid layout.

-   **coordinate space** -`coord_flip()` → Flips x and y axes.

-   **labels** - control titles, axis and legend labels.

-   **theme** - Themes control non-data elements like text, background,
    and gridlines:

    -   `theme_minimal()` → Clean layout.

    -   `theme_classic()` → Simple classic theme.

    -   `theme_dark()` → Dark background.

```{r message=FALSE, warning=FALSE, include=FALSE}
library(tidyverse)
```

------------------------------------------------------------------------

### DATA

Data is the first element of any ggplot visualization. The ggplot
function assumes that your data is the first element, followed by the
variable to go on the x-axis, then the y-axis:

ggplot(data, x-variable, y-variable)

You can label your items if you wish or keep it simple. The following
code produces the same result:

```{r Biochemical Oxygen Demand Dataset, echo=FALSE, message=FALSE, warning=FALSE}

ggplot(data = BOD,
       mapping = aes(x = Time, y= demand)) +
  geom_point(size=3, colour = "red") +
  geom_line(color="blue")
 
ggplot(BOD, aes(Time, demand)) +
  geom_point(size=3, colour = "red") +
  geom_line(colour="blue")

BOD %>%
  ggplot(aes(Time, demand)) +
  geom_point(size=3, colour = "red") +
  geom_line(colour="blue")
```

------------------------------------------------------------------------

Using the pipe operator %\>%, we can pass the data to the ggplot
function.\
We no longer have to specify the source data in the ggplot() line.
Think\
of %\>% as "and then..."

```{r CO2 Dataset, echo=FALSE, message=FALSE, warning=FALSE}

# CO2
# head(CO2)

# variables are: Plant, Type, Treatment, Concentration, Uptake
#?CO2


CO2 %>% 
  ggplot(aes(conc, uptake, colour = Treatment)) +
  geom_point(size = 3, alpha = 0.5) +
  geom_smooth(method = lm, se = FALSE) + 
  facet_wrap(~Type) + # use a categorical variable to split the resulting plot into one plot for each category
  labs(
    title = "Concentration of CO2",
    x = "Concentration",
    y = "Uptake"
  ) +
  theme_grey()
```

------------------------------------------------------------------------

```{r Line Plots with Points, echo=FALSE}
CO2 %>% 
  ggplot(aes(Treatment, uptake)) +
  geom_boxplot() +
  geom_point(alpha = 0.5, 
             aes(size=conc, # using a continuous variable to control point size
                 colour = Plant)) + # using a categorical variable to control plant colour
  facet_wrap(~Type) +
  #coord_flip() + # rotate the visual 90'
  theme_bw() +
  labs(
    title = "Chilled vs Non-Chilled"
  )
```

------------------------------------------------------------------------

```{r Miles Per Gallon Dataset, echo=FALSE, message=FALSE, warning=FALSE}

# head(mpg)
 

mpg %>%
  filter(cty < 25) %>% 
  ggplot(aes(displ, cty)) +
  geom_point(aes(colour = drv,
                 size = trans),
             alpha = 0.5) + # alpha controls the point transparency (0-1)
  geom_smooth(method = lm) +
  #facet_wrap(~year, nrow = 1) +
  labs(
    x="Engine Size",
    y="Miles per Gallon (mpg in city)",
    title = "Fuel Efficiency"
  ) +
  theme_minimal()
```
